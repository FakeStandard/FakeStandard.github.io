<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>【.NET Core】記錄 Logging | How can I help</title>
<meta name="keywords" content="DotNET Core, ASP.NET Core 5, CSharp, Logging" />
<meta name="description" content="【ASP.NET Core 5】
過去在記錄 Log 時，會使用第三方套件來記錄，在 .NET Core 預設就已經將 Logger 注入到 DI 容器，直接使用 ILogger 介面來執行。
Start 此篇會紀錄的部分有以下
 Logging Provider Create Logs Log Level Log EventID Log Message Log Exceptions Configure Logging  Logging Provider Logging Provider 會儲存記錄檔，但 Console 顯示記錄的提供者除外。
在 Program.cs 調用 CreateDefaultBuilder 會新增下列記錄提供者
 Console Debug EventSource EventLog: Windows only  欲 override 由 Host.CreateDefaultBuilder 設置的 logging provider 集合，可呼叫 ClearProviders 移除所有 ILoggerProvider 實例，再加入需要的記錄提供者。
public static IHostBuilder CreateHostBuilder(string[] args) =&gt; Host.">
<meta name="author" content="Polar Bear">
<link rel="canonical" href="https://fakestandard.github.io/netcore/netcore5-5-logging/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.d1b405b7c6bf1b09aebca33eb6e2d8bd070113d119bdfa2715c32f6408f9fbee.css" integrity="sha256-0bQFt8a/GwmuvKM&#43;tuLYvQcBE9EZvfonFcMvZAj5&#43;&#43;4=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>


<script data-ad-client="ca-pub-4877674098686024" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<meta name="google-site-verification" content="iCWzIE4kN0sAVM_Slr-q8E5zIT2Qfs-IxUuxhpFVD94" />


<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<link rel="icon" href="https://fakestandard.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://fakestandard.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://fakestandard.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://fakestandard.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://fakestandard.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.81.0" />
<meta property="og:title" content="【.NET Core】記錄 Logging" />
<meta property="og:description" content="【ASP.NET Core 5】
過去在記錄 Log 時，會使用第三方套件來記錄，在 .NET Core 預設就已經將 Logger 注入到 DI 容器，直接使用 ILogger 介面來執行。
Start 此篇會紀錄的部分有以下
 Logging Provider Create Logs Log Level Log EventID Log Message Log Exceptions Configure Logging  Logging Provider Logging Provider 會儲存記錄檔，但 Console 顯示記錄的提供者除外。
在 Program.cs 調用 CreateDefaultBuilder 會新增下列記錄提供者
 Console Debug EventSource EventLog: Windows only  欲 override 由 Host.CreateDefaultBuilder 設置的 logging provider 集合，可呼叫 ClearProviders 移除所有 ILoggerProvider 實例，再加入需要的記錄提供者。
public static IHostBuilder CreateHostBuilder(string[] args) =&gt; Host." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://fakestandard.github.io/netcore/netcore5-5-logging/" /><meta property="article:section" content="NETCore" />
<meta property="article:published_time" content="2021-06-11T11:10:37&#43;08:00" />
<meta property="article:modified_time" content="2021-06-11T11:10:37&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="【.NET Core】記錄 Logging"/>
<meta name="twitter:description" content="【ASP.NET Core 5】
過去在記錄 Log 時，會使用第三方套件來記錄，在 .NET Core 預設就已經將 Logger 注入到 DI 容器，直接使用 ILogger 介面來執行。
Start 此篇會紀錄的部分有以下
 Logging Provider Create Logs Log Level Log EventID Log Message Log Exceptions Configure Logging  Logging Provider Logging Provider 會儲存記錄檔，但 Console 顯示記錄的提供者除外。
在 Program.cs 調用 CreateDefaultBuilder 會新增下列記錄提供者
 Console Debug EventSource EventLog: Windows only  欲 override 由 Host.CreateDefaultBuilder 設置的 logging provider 集合，可呼叫 ClearProviders 移除所有 ILoggerProvider 實例，再加入需要的記錄提供者。
public static IHostBuilder CreateHostBuilder(string[] args) =&gt; Host."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "NETCores",
      "item": "https://fakestandard.github.io/netcore/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "【.NET Core】記錄 Logging",
      "item": "https://fakestandard.github.io/netcore/netcore5-5-logging/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "【.NET Core】記錄 Logging",
  "name": "【.NET Core】記錄 Logging",
  "description": "【ASP.NET Core 5】\n過去在記錄 Log 時，會使用第三方套件來記錄，在 .NET Core 預設就已經將 Logger 注入到 DI 容器，直接使用 ILogger 介面來執行。\nStart 此篇會紀錄的部分有以下\n Logging Provider Create Logs Log Level Log EventID Log Message Log Exceptions Configure Logging  Logging Provider Logging Provider 會儲存記錄檔，但 Console 顯示記錄的提供者除外。\n在 Program.cs 調用 CreateDefaultBuilder 會新增下列記錄提供者\n Console Debug EventSource EventLog: Windows only  欲 override 由 Host.CreateDefaultBuilder 設置的 logging provider 集合，可呼叫 ClearProviders 移除所有 ILoggerProvider 實例，再加入需要的記錄提供者。\npublic static IHostBuilder CreateHostBuilder(string[] args) =\u0026gt; Host.",
  "keywords": [
    "DotNET Core", "ASP.NET Core 5", "CSharp", "Logging"
  ],
  "articleBody": "【ASP.NET Core 5】\n過去在記錄 Log 時，會使用第三方套件來記錄，在 .NET Core 預設就已經將 Logger 注入到 DI 容器，直接使用 ILogger 介面來執行。\nStart 此篇會紀錄的部分有以下\n Logging Provider Create Logs Log Level Log EventID Log Message Log Exceptions Configure Logging  Logging Provider Logging Provider 會儲存記錄檔，但 Console 顯示記錄的提供者除外。\n在 Program.cs 調用 CreateDefaultBuilder 會新增下列記錄提供者\n Console Debug EventSource EventLog: Windows only  欲 override 由 Host.CreateDefaultBuilder 設置的 logging provider 集合，可呼叫 ClearProviders 移除所有 ILoggerProvider 實例，再加入需要的記錄提供者。\npublic static IHostBuilder CreateHostBuilder(string[] args) = Host.CreateDefaultBuilder(args) .ConfigureLogging(logging = { logging.ClearProviders(); // 加入 Console logging provider  logging.AddConsole(); }) .ConfigureWebHostDefaults(webBuilder = { webBuilder.UseStartup(); }); Create Logs 使用相依性注入（DI）的 ILogger 物件來建立記錄，在 HomeController 取得 ILogger 實例，在動作方法 Index 中調用方法來記錄 Log\nprivate readonly ILogger _logger; public HomeController(ILogger logger) { _logger = logger; } public IActionResult Index() { // 記錄  _logger.Log(LogLevel.Information, \"About logger information.\"); return View(); } 使用 _logger.Log() 方法，其中第一個參數為 LogLevel 代表記錄檔的嚴重層級，通常開發人員會直接調用 Log{LogLevel} 擴展方法，如 LogError；擴展方法會呼叫 Log 並指定記錄層級，兩者皆可達相同記錄效果。\nLog Level 下列為 Log 層級之擴展方法及建議用法\n   LogLevel Value Method      Trace 0 LogTrace 追蹤   Debug 1 LogDebug 偵錯   Information 2 LogInformation 資訊   Warning 3 LogWarning 警告   Error 4 LogError 錯誤   Critical 5 LogCritical 嚴重   None 6  指定記錄類別不應寫入任何訊息    在 HomeController/Index 內呼叫 TestLog 方法，該方法內使用不同層級的擴展方法來記錄\npublic void TestLog() { _logger.LogTrace(\"Trace log.\"); _logger.LogDebug(\"Debug log.\"); _logger.LogInformation(\"Information log.\"); _logger.LogWarning(\"Warning log.\"); _logger.LogError(\"Error log.\"); _logger.LogCritical(\"Critical log.\"); } 執行 dotnet run 運行程式，可得到以下輸出\nLog something... info: NetCore5.Controllers.HomeController[0] Information log. warn: NetCore5.Controllers.HomeController[0] Warning log. fail: NetCore5.Controllers.HomeController[0] Error log. crit: NetCore5.Controllers.HomeController[0] Critical log. 實際觀察，輸出時會記錄一堆 Log，然而預期 TestLog 只會輸出六筆，實際上也只有輸出四筆，因為在 Log Level 中每種層級的定義如下\nTrace 此類 Log 包含詳細的訊息，其中可能含有敏感性的應用程式資料，不應在生產環境中啟用，通常會用於開發環境，而該類 Log 預設為停用。\nDebug 此類 Log 通常用於生產環境偵錯，避免 Log 數量過大，在生產環境中須謹慎使用，該類預設為停用\nInformation 常見的 Log 類型，用以追蹤應用程式運行的流程作業，可能具有長期價值\nWarning 針對異常或非預期的事件，通常該類訊息是不會導致應用程式失敗的錯誤或狀況，屬於警示但非錯誤，不影響應用程式運行。\nError 該類 Log 用於表示當前執行作業失敗，或者要求失敗，引發無法處理的錯誤或例外狀況，但僅此於作業，而非整個應用程式失敗。\nCritical 此類 Log 表示發生需要立即注意的失敗，通常是嚴重的錯誤事件，如資料遺失、磁碟空間不足或是系統崩潰事件等，導致應用程式無法運行的情況。\nLog Event ID 每個 Log 可以指定一個事件識別碼，下列使用 LogEvents 類別定義事件 ID\npublic class MyLogEvents { public const int GenerateItems = 1000; public const int ListItems = 1001; public const int GetItem = 1002; public const int InsertItem = 1003; public const int UpdateItem = 1004; public const int DeleteItem = 1005; public const int TestItem = 3000; public const int GetItemNotFound = 4000; public const int UpdateItemNotFound = 4001; } 建立一個 Todo 相關的動作方法，取得指定 id 的資料，當找不到該筆資料時，除了返回 Not Found 之外，透過 Logger 來記錄成警示訊息。\n[HttpGet(\"{id}\")] public async IActionResult GetTodoItem(int id) { // 記錄一般資訊  _logger.LogInformation(MyLogEvents.GetItem, \"Getting item {Id}\", id); var items = await _context.TodoItems.FindAsync(id); if (items == null) { // 記錄警示事件碼  _logger.LogWarning(MyLogEvents.GetItemNotFound, \"Get {id} Not Fount\", id); return NotFound(); } return View(items); } 從 Event ID 可以得知，我們可以將頁面上較為相關的方法或動作，歸類成同一個 Event ID，例如在取得特定資料時返回 Not Found ，都將歸類成 4000。\n我們已經將 Event ID 帶入 Log 方法中，實際運行應用程式觀察記錄結果\ninfo: NetCore5.Controllers.HomeController[1002] Getting item 1 warn: NetCore5.Controllers.HomeController[4000] Get(1) NOT FOUND 從結果可看到，Log provider 將事件識別碼存放到識別碼欄位 [1002]，方便用於識別不同事件的一種方法。\nLog Message 在上述的範例中，除了添加第一個參數 Event ID，還添加了第二和第三個參數，第二個參數為要記錄的訊息，第三個參數則是「提供給第二個參數使用之參數」，執行下方代碼\npublic void TestLog() { string p1 = \"param1\"; string p2 = \"param2\"; _logger.LogInformation(\"Parameter values: {p2}, {p1}\", p1, p2); } 查看實際記錄訊息\ninfo: NetCore5.Controllers.HomeController[0] Parameter values: param1, param2 我們可得知在提供參數部分，是依照順序來提供值，而非名稱。\nLog Exceptions Logger 還可以具有接受例外狀況的多載方法\npublic void TestLogException() { _logger.LogError(new Exception(\"Test exception\"), \"Test Exception\"); } Configure Logging 在運行應用程式時，會紀錄許多系統資訊，在先前的範例中，Trace 和 Debug 預設不會輸出，像這些預設要記錄的資訊和層級，都是在 appsettings.json 內設定。\n{ \"Logging\": { \"LogLevel\": { \"Default\": \"Information\", \"Microsoft\": \"Warning\", \"Microsoft.Hosting.Lifetime\": \"Information\" } }, } 找到 Logging，在 LogLevel 節點下已設定好預設層級及範圍，由 Default 來說，它預設是紀錄 Information 以上的層級，Microsoft 預設會記錄 Warning 以上的層級訊息，以此類推。\n透過設定檔來過濾掉一些不需要關注的 Log，將專案加入到 LogLevel 下，並設定層級為 Trace，其餘皆設置為 Error。\n{ \"Logging\": { \"LogLevel\": { \"Default\": \"Information\", \"NetCore5\": \"Trace\", \"Microsoft\": \"Error\", \"Microsoft.Hosting.Lifetime\": \"Error\" } }, } 實際運行應用程式，可看到原先 Trace 和 Debug 預設停用已經被修改為要記錄，而 Microsoft 的一些資訊，我們也已經將層級提到到 Error，進而關注我們想關注的部分。\nNote 過去在開發網站中，需要做紀錄時會用第三方套件，而 .NET Core 帶來內建的紀錄檔，在開發上是否能帶來新一代突破，或者，其實 Logger 與筆者所想的並非相同，待筆者實務操作後，再來分享。\nReference Logging in .NET Core and ASP.NET Core\n",
  "wordCount" : "513",
  "inLanguage": "en",
  "datePublished": "2021-06-11T11:10:37+08:00",
  "dateModified": "2021-06-11T11:10:37+08:00",
  "author":{
    "@type": "Person",
    "name": "Polar Bear"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://fakestandard.github.io/netcore/netcore5-5-logging/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "How can I help",
    "logo": {
      "@type": "ImageObject",
      "url": "https://fakestandard.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://fakestandard.github.io/" accesskey="h" title="How can I help (Alt + H)">How can I help</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://fakestandard.github.io/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://fakestandard.github.io/algorithm/" title="Algorithm">
                    <span>Algorithm</span>
                </a>
            </li>
            <li>
                <a href="https://fakestandard.github.io/netcore/" title=".NET Core">
                    <span>.NET Core</span>
                </a>
            </li>
            <li>
                <a href="https://fakestandard.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://fakestandard.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://fakestandard.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://fakestandard.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://fakestandard.github.io/netcore/">NETCores</a></div>
    <h1 class="post-title">
      【.NET Core】記錄 Logging
    </h1>
    <div class="post-meta">June 11, 2021&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Polar Bear
</div>
  </header> 
  <div class="post-content"><p>【ASP.NET Core 5】</p>
<p>過去在記錄 Log 時，會使用第三方套件來記錄，在 .NET Core 預設就已經將 Logger 注入到 DI 容器，直接使用 <code>ILogger</code> 介面來執行。</p>
<h1 id="start">Start<a hidden class="anchor" aria-hidden="true" href="#start">#</a></h1>
<p>此篇會紀錄的部分有以下</p>
<ul>
<li>Logging Provider</li>
<li>Create Logs</li>
<li>Log Level</li>
<li>Log EventID</li>
<li>Log Message</li>
<li>Log Exceptions</li>
<li>Configure Logging</li>
</ul>
<h2 id="logging-provider">Logging Provider<a hidden class="anchor" aria-hidden="true" href="#logging-provider">#</a></h2>
<p>Logging Provider 會儲存記錄檔，但 <code>Console</code> 顯示記錄的提供者除外。</p>
<p>在 <code>Program.cs</code> 調用 <code>CreateDefaultBuilder</code> 會新增下列記錄提供者</p>
<ul>
<li>Console</li>
<li>Debug</li>
<li>EventSource</li>
<li>EventLog: Windows only</li>
</ul>
<p>欲 override 由 <code>Host.CreateDefaultBuilder</code> 設置的 logging provider 集合，可呼叫 <code>ClearProviders</code> 移除所有 <code>ILoggerProvider</code> 實例，再加入需要的記錄提供者。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-CSharp" data-lang="CSharp"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IHostBuilder CreateHostBuilder(<span style="color:#66d9ef">string</span>[] args) =&gt;
        Host.CreateDefaultBuilder(args)
            .ConfigureLogging(logging =&gt;
            {
                logging.ClearProviders();
                <span style="color:#75715e">// 加入 Console logging provider
</span><span style="color:#75715e"></span>                logging.AddConsole();
            })
            .ConfigureWebHostDefaults(webBuilder =&gt;
            {
                webBuilder.UseStartup&lt;Startup&gt;();
            });
</code></pre></div><h2 id="create-logs">Create Logs<a hidden class="anchor" aria-hidden="true" href="#create-logs">#</a></h2>
<p>使用相依性注入（DI）的 <code>ILogger&lt;TCategoryName&gt;</code> 物件來建立記錄，在 <code>HomeController</code> 取得 <code>ILogger&lt;HomeController&gt;</code> 實例，在動作方法 <code>Index</code> 中調用方法來記錄 Log</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-CSharp" data-lang="CSharp"><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> ILogger&lt;HomeController&gt; _logger;

<span style="color:#66d9ef">public</span> HomeController(ILogger&lt;HomeController&gt; logger)
{
    _logger = logger;
}

<span style="color:#66d9ef">public</span> IActionResult Index()
{
    <span style="color:#75715e">// 記錄
</span><span style="color:#75715e"></span>    _logger.Log(LogLevel.Information, <span style="color:#e6db74">&#34;About logger information.&#34;</span>);

    <span style="color:#66d9ef">return</span> View();
}
</code></pre></div><p>使用 <code>_logger.Log()</code> 方法，其中第一個參數為 <code>LogLevel</code> 代表記錄檔的嚴重層級，通常開發人員會直接調用 <code>Log{LogLevel}</code> 擴展方法，如 <code>LogError</code>；擴展方法會呼叫 <code>Log</code> 並指定記錄層級，兩者皆可達相同記錄效果。</p>
<h2 id="log-level">Log Level<a hidden class="anchor" aria-hidden="true" href="#log-level">#</a></h2>
<p>下列為 Log 層級之擴展方法及建議用法</p>
<table>
<thead>
<tr>
<th>LogLevel</th>
<th>Value</th>
<th>Method</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Trace</td>
<td>0</td>
<td>LogTrace</td>
<td>追蹤</td>
</tr>
<tr>
<td>Debug</td>
<td>1</td>
<td>LogDebug</td>
<td>偵錯</td>
</tr>
<tr>
<td>Information</td>
<td>2</td>
<td>LogInformation</td>
<td>資訊</td>
</tr>
<tr>
<td>Warning</td>
<td>3</td>
<td>LogWarning</td>
<td>警告</td>
</tr>
<tr>
<td>Error</td>
<td>4</td>
<td>LogError</td>
<td>錯誤</td>
</tr>
<tr>
<td>Critical</td>
<td>5</td>
<td>LogCritical</td>
<td>嚴重</td>
</tr>
<tr>
<td>None</td>
<td>6</td>
<td></td>
<td>指定記錄類別不應寫入任何訊息</td>
</tr>
</tbody>
</table>
<p>在 <code>HomeController/Index</code> 內呼叫 <code>TestLog</code> 方法，該方法內使用不同層級的擴展方法來記錄</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-CSharp" data-lang="CSharp"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> TestLog()
{
    _logger.LogTrace(<span style="color:#e6db74">&#34;Trace log.&#34;</span>);
    _logger.LogDebug(<span style="color:#e6db74">&#34;Debug log.&#34;</span>);
    _logger.LogInformation(<span style="color:#e6db74">&#34;Information log.&#34;</span>);
    _logger.LogWarning(<span style="color:#e6db74">&#34;Warning log.&#34;</span>);
    _logger.LogError(<span style="color:#e6db74">&#34;Error log.&#34;</span>);
    _logger.LogCritical(<span style="color:#e6db74">&#34;Critical log.&#34;</span>);
}
</code></pre></div><p>執行 <code>dotnet run</code> 運行程式，可得到以下輸出</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">Log something...

info: NetCore5.Controllers.HomeController[0]
      Information log.
warn: NetCore5.Controllers.HomeController[0]
      Warning log.
fail: NetCore5.Controllers.HomeController[0]
      Error log.
crit: NetCore5.Controllers.HomeController[0]
      Critical log.
</code></pre></div><p>實際觀察，輸出時會記錄一堆 Log，然而預期 <code>TestLog</code> 只會輸出六筆，實際上也只有輸出四筆，因為在 Log Level 中每種層級的定義如下</p>
<h3 id="trace">Trace<a hidden class="anchor" aria-hidden="true" href="#trace">#</a></h3>
<p>此類 Log 包含詳細的訊息，其中可能含有敏感性的應用程式資料，不應在生產環境中啟用，通常會用於開發環境，而該類 Log <strong>預設為停用</strong>。</p>
<h3 id="debug">Debug<a hidden class="anchor" aria-hidden="true" href="#debug">#</a></h3>
<p>此類 Log 通常用於生產環境偵錯，避免 Log 數量過大，在生產環境中須謹慎使用，該類<strong>預設為停用</strong></p>
<h3 id="information">Information<a hidden class="anchor" aria-hidden="true" href="#information">#</a></h3>
<p>常見的 Log 類型，用以追蹤應用程式運行的流程作業，可能具有長期價值</p>
<h3 id="warning">Warning<a hidden class="anchor" aria-hidden="true" href="#warning">#</a></h3>
<p>針對異常或非預期的事件，通常該類訊息是不會導致應用程式失敗的錯誤或狀況，屬於警示但非錯誤，不影響應用程式運行。</p>
<h3 id="error">Error<a hidden class="anchor" aria-hidden="true" href="#error">#</a></h3>
<p>該類 Log 用於表示當前執行作業失敗，或者要求失敗，引發無法處理的錯誤或例外狀況，但僅此於作業，而非整個應用程式失敗。</p>
<h3 id="critical">Critical<a hidden class="anchor" aria-hidden="true" href="#critical">#</a></h3>
<p>此類 Log 表示發生需要立即注意的失敗，通常是嚴重的錯誤事件，如資料遺失、磁碟空間不足或是系統崩潰事件等，導致應用程式無法運行的情況。</p>
<h2 id="log-event-id">Log Event ID<a hidden class="anchor" aria-hidden="true" href="#log-event-id">#</a></h2>
<p>每個 Log 可以指定一個事件識別碼，下列使用 <code>LogEvents</code> 類別定義事件 ID</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-CSharp" data-lang="CSharp"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyLogEvents</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> GenerateItems = <span style="color:#ae81ff">1000</span>;
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> ListItems = <span style="color:#ae81ff">1001</span>;
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> GetItem = <span style="color:#ae81ff">1002</span>;
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> InsertItem = <span style="color:#ae81ff">1003</span>;
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> UpdateItem = <span style="color:#ae81ff">1004</span>;
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> DeleteItem = <span style="color:#ae81ff">1005</span>;

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> TestItem = <span style="color:#ae81ff">3000</span>;

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> GetItemNotFound = <span style="color:#ae81ff">4000</span>;
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> UpdateItemNotFound = <span style="color:#ae81ff">4001</span>;
}
</code></pre></div><p>建立一個 Todo 相關的動作方法，取得指定 id 的資料，當找不到該筆資料時，除了返回 <code>Not Found</code> 之外，透過 <code>Logger</code> 來記錄成警示訊息。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-CSharp" data-lang="CSharp"><span style="color:#a6e22e">[HttpGet(&#34;{id}&#34;)]</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">async</span> IActionResult GetTodoItem(<span style="color:#66d9ef">int</span> id)
{
    <span style="color:#75715e">// 記錄一般資訊
</span><span style="color:#75715e"></span>    _logger.LogInformation(MyLogEvents.GetItem, <span style="color:#e6db74">&#34;Getting item {Id}&#34;</span>, id);

    <span style="color:#66d9ef">var</span> items = <span style="color:#66d9ef">await</span> _context.TodoItems.FindAsync(id);

    <span style="color:#66d9ef">if</span> (items == <span style="color:#66d9ef">null</span>)
    {
        <span style="color:#75715e">// 記錄警示事件碼
</span><span style="color:#75715e"></span>        _logger.LogWarning(MyLogEvents.GetItemNotFound, <span style="color:#e6db74">&#34;Get {id} Not Fount&#34;</span>, id);

        <span style="color:#66d9ef">return</span> NotFound();
    }

    <span style="color:#66d9ef">return</span> View(items);
}
</code></pre></div><p>從 Event ID 可以得知，我們可以將頁面上較為相關的方法或動作，歸類成同一個 Event ID，例如在取得特定資料時返回 <code>Not Found</code> ，都將歸類成 <code>4000</code>。</p>
<p>我們已經將 Event ID 帶入 <code>Log</code> 方法中，實際運行應用程式觀察記錄結果</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">info: NetCore5.Controllers.HomeController[1002]
      Getting item 1
warn: NetCore5.Controllers.HomeController[4000]
      Get(1) NOT FOUND
</code></pre></div><p>從結果可看到，Log provider 將事件識別碼存放到識別碼欄位 <code>[1002]</code>，方便用於識別不同事件的一種方法。</p>
<h2 id="log-message">Log Message<a hidden class="anchor" aria-hidden="true" href="#log-message">#</a></h2>
<p>在上述的範例中，除了添加第一個參數 Event ID，還添加了第二和第三個參數，第二個參數為要記錄的訊息，第三個參數則是「提供給第二個參數使用之參數」，執行下方代碼</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-CSharp" data-lang="CSharp"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> TestLog()
{
    <span style="color:#66d9ef">string</span> p1 = <span style="color:#e6db74">&#34;param1&#34;</span>;
    <span style="color:#66d9ef">string</span> p2 = <span style="color:#e6db74">&#34;param2&#34;</span>;

    _logger.LogInformation(<span style="color:#e6db74">&#34;Parameter values: {p2}, {p1}&#34;</span>, p1, p2);
}
</code></pre></div><p>查看實際記錄訊息</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">info: NetCore5.Controllers.HomeController[0]
      Parameter values: param1, param2
</code></pre></div><p>我們可得知在提供參數部分，是依照順序來提供值，而非名稱。</p>
<h2 id="log-exceptions">Log Exceptions<a hidden class="anchor" aria-hidden="true" href="#log-exceptions">#</a></h2>
<p><code>Logger</code> 還可以具有接受例外狀況的多載方法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-CSharp" data-lang="CSharp"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> TestLogException()
{
    _logger.LogError(<span style="color:#66d9ef">new</span> Exception(<span style="color:#e6db74">&#34;Test exception&#34;</span>), <span style="color:#e6db74">&#34;Test Exception&#34;</span>);
}
</code></pre></div><h2 id="configure-logging">Configure Logging<a hidden class="anchor" aria-hidden="true" href="#configure-logging">#</a></h2>
<p>在運行應用程式時，會紀錄許多系統資訊，在先前的範例中，<code>Trace</code> 和 <code>Debug</code> 預設不會輸出，像這些預設要記錄的資訊和層級，都是在 <code>appsettings.json</code> 內設定。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Json" data-lang="Json">{
  <span style="color:#f92672">&#34;Logging&#34;</span>: {
    <span style="color:#f92672">&#34;LogLevel&#34;</span>: {
      <span style="color:#f92672">&#34;Default&#34;</span>: <span style="color:#e6db74">&#34;Information&#34;</span>,
      <span style="color:#f92672">&#34;Microsoft&#34;</span>: <span style="color:#e6db74">&#34;Warning&#34;</span>,
      <span style="color:#f92672">&#34;Microsoft.Hosting.Lifetime&#34;</span>: <span style="color:#e6db74">&#34;Information&#34;</span>
    }
  },
}
</code></pre></div><p>找到 <code>Logging</code>，在 <code>LogLevel</code> 節點下已設定好預設層級及範圍，由 <code>Default</code> 來說，它預設是紀錄 <code>Information</code> 以上的層級，<code>Microsoft</code> 預設會記錄 <code>Warning</code> 以上的層級訊息，以此類推。</p>
<p>透過設定檔來過濾掉一些不需要關注的 Log，將專案加入到 <code>LogLevel</code> 下，並設定層級為 <code>Trace</code>，其餘皆設置為 <code>Error</code>。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Json" data-lang="Json">{
  <span style="color:#f92672">&#34;Logging&#34;</span>: {
    <span style="color:#f92672">&#34;LogLevel&#34;</span>: {
      <span style="color:#f92672">&#34;Default&#34;</span>: <span style="color:#e6db74">&#34;Information&#34;</span>,
      <span style="color:#f92672">&#34;NetCore5&#34;</span>: <span style="color:#e6db74">&#34;Trace&#34;</span>,
      <span style="color:#f92672">&#34;Microsoft&#34;</span>: <span style="color:#e6db74">&#34;Error&#34;</span>,
      <span style="color:#f92672">&#34;Microsoft.Hosting.Lifetime&#34;</span>: <span style="color:#e6db74">&#34;Error&#34;</span>
    }
  },
}
</code></pre></div><p>實際運行應用程式，可看到原先 <code>Trace</code> 和 <code>Debug</code> 預設停用已經被修改為要記錄，而 <code>Microsoft</code> 的一些資訊，我們也已經將層級提到到 <code>Error</code>，進而關注我們想關注的部分。</p>
<h1 id="note">Note<a hidden class="anchor" aria-hidden="true" href="#note">#</a></h1>
<p>過去在開發網站中，需要做紀錄時會用第三方套件，而 .NET Core 帶來內建的紀錄檔，在開發上是否能帶來新一代突破，或者，其實 Logger 與筆者所想的並非相同，待筆者實務操作後，再來分享。</p>
<h1 id="reference">Reference<a hidden class="anchor" aria-hidden="true" href="#reference">#</a></h1>
<p><a href="https://docs.microsoft.com/zh-tw/aspnet/core/fundamentals/logging/?view=aspnetcore-5.0">Logging in .NET Core and ASP.NET Core</a></p>

</div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://fakestandard.github.io/tags/dotnet-core/">DotNET Core</a></li>
      <li><a href="https://fakestandard.github.io/tags/asp.net-core-5/">ASP.NET Core 5</a></li>
      <li><a href="https://fakestandard.github.io/tags/csharp/">CSharp</a></li>
      <li><a href="https://fakestandard.github.io/tags/logging/">Logging</a></li>
    </ul>

<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share 【.NET Core】記錄 Logging on twitter"
        href="https://twitter.com/intent/tweet/?text=%e3%80%90.NET%20Core%e3%80%91%e8%a8%98%e9%8c%84%20Logging&amp;url=https%3a%2f%2ffakestandard.github.io%2fnetcore%2fnetcore5-5-logging%2f&amp;hashtags=DotNETCore%2cASP.NETCore5%2cCSharp%2cLogging">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 【.NET Core】記錄 Logging on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2ffakestandard.github.io%2fnetcore%2fnetcore5-5-logging%2f&amp;title=%e3%80%90.NET%20Core%e3%80%91%e8%a8%98%e9%8c%84%20Logging&amp;summary=%e3%80%90.NET%20Core%e3%80%91%e8%a8%98%e9%8c%84%20Logging&amp;source=https%3a%2f%2ffakestandard.github.io%2fnetcore%2fnetcore5-5-logging%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 【.NET Core】記錄 Logging on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2ffakestandard.github.io%2fnetcore%2fnetcore5-5-logging%2f&title=%e3%80%90.NET%20Core%e3%80%91%e8%a8%98%e9%8c%84%20Logging">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 【.NET Core】記錄 Logging on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2ffakestandard.github.io%2fnetcore%2fnetcore5-5-logging%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 【.NET Core】記錄 Logging on whatsapp"
        href="https://api.whatsapp.com/send?text=%e3%80%90.NET%20Core%e3%80%91%e8%a8%98%e9%8c%84%20Logging%20-%20https%3a%2f%2ffakestandard.github.io%2fnetcore%2fnetcore5-5-logging%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 【.NET Core】記錄 Logging on telegram"
        href="https://telegram.me/share/url?text=%e3%80%90.NET%20Core%e3%80%91%e8%a8%98%e9%8c%84%20Logging&amp;url=https%3a%2f%2ffakestandard.github.io%2fnetcore%2fnetcore5-5-logging%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main>
    <footer class="footer">
    <span>&copy; 2021 <a href="https://fakestandard.github.io/">How can I help</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
